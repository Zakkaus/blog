{{ $logo := resources.Get "img/logo.webp" }}
{{ if $logo }}
  {{ $icon512 := $logo.Resize "512x512 png" }}
  {{ $icon192 := $logo.Resize "192x192 png" }}
  {{ $icon180 := $logo.Resize "180x180 png" }}
  {{ $icon32 := $logo.Resize "32x32 png" }}
  {{ $icon16 := $logo.Resize "16x16 png" }}
  {{ $manifestData := dict 
    "name" (.Title | default "")
    "short_name" (.Title | default "")
      "icons" (slice
        (dict "src" $icon192.RelPermalink "sizes" "192x192" "type" "image/png")
        (dict "src" $icon512.RelPermalink "sizes" "512x512" "type" "image/png")
      )
      "theme_color" (.Params.manifestThemeColor | default "#2563eb")
      "background_color" (.Params.manifestBackgroundColor | default "#ffffff")
      "display" "standalone"
    }}
  {{ $manifest := resources.FromString "site.webmanifest" ($manifestData | jsonify) }}
  <link rel="apple-touch-icon" sizes="180x180" href="{{ $icon180.RelPermalink }}">
  <link rel="icon" type="image/png" sizes="32x32" href="{{ $icon32.RelPermalink }}">
  <link rel="icon" type="image/png" sizes="16x16" href="{{ $icon16.RelPermalink }}">
  <link rel="shortcut icon" type="image/png" href="{{ $icon32.RelPermalink }}">
  <link rel="manifest" href="{{ $manifest.RelPermalink }}">
{{ else }}
  <link rel="apple-touch-icon" sizes="180x180" href="{{ "apple-touch-icon.png" | relURL }}">
  <link rel="icon" type="image/png" sizes="32x32" href="{{ "favicon-32x32.png" | relURL }}">
  <link rel="icon" type="image/png" sizes="16x16" href="{{ "favicon-16x16.png" | relURL }}">
  <link rel="manifest" href="{{ "site.webmanifest" | relURL }}">
{{ end }}
