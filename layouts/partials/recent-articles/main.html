{{ if .Site.Params.homepage.showRecent | default false }}
  {{ $dest := .Site.Params.homepage.showMoreLinkDest | default "posts" }}
  {{ $showMoreLinkDest := "" }}
  {{ $cardView := .Site.Params.homepage.cardView | default false }}
  {{ $cardViewFullWidth := .Site.Params.homepage.cardViewScreenWidth | default false }}

  {{ if .Site.Params.homepage.showMoreLink | default false }}
    {{ if or (strings.HasPrefix $dest "http://") (strings.HasPrefix $dest "https://") }}
      {{ $showMoreLinkDest = $dest }}
    {{ else }}
      {{ $cleanDest := strings.TrimSuffix "/" (strings.TrimPrefix "/" $dest) }}
      {{ $showMoreLinkDest = relLangURL (printf "/%s/" $cleanDest) }}
    {{ end }}
  {{ end }}

  <h2 class="mt-8 text-2xl font-extrabold mb-10">{{ i18n "shortcode.recent_articles" | emojify }}</h2>

  {{ if and $cardView (not $cardViewFullWidth) }}
    {{ partial "recent-articles/cardview.html" . }}
  {{ else if and $cardView $cardViewFullWidth }}
    {{ partial "recent-articles/cardview-fullwidth.html" . }}
  {{ else }}
    {{ partial "recent-articles/list.html" . }}
  {{ end }}

  {{ if and (.Site.Params.homepage.showMoreLink | default false) $showMoreLinkDest }}
    <div class="mt-10 flex justify-center">
      <a href="{{ $showMoreLinkDest }}">
        <button
          class="bg-transparent hover:text-primary-500 prose dark:prose-invert font-semibold py-2 px-4 border border-primary-500 hover:border-transparent rounded">
          {{ i18n "recent.show_more" | markdownify }}
        </button>
      </a>
    </div>
  {{ end }}
{{ end }}
